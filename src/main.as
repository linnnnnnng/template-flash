package  {	import flash.events.*;	import flash.system.*;	import flash.display.*;	import com.greensock.*;	import com.greensock.easing.*;	import com.google.analytics.GATracker;	import com.google.analytics.AnalyticsTracker;	import com.adobe.serialization.json.JSON;	import com.facebook.graph.Facebook;	import com.asual.swfaddress.*;	import com.monstercode.*;		public class main extends MovieClip	{		//FACEBOOK API ID		protected static const APP_ID:String = "";		//GOOGLE ANALYTICS		private var tracker:AnalyticsTracker;		private var testLocal:Boolean = true		private var appID,host,ga				public function main() {			//======SWFADDRESS START======			var domain:String = LoaderInfo(this.root.loaderInfo).parameters.domain;			Security.allowDomain(domain);			Security.allowInsecureDomain(domain);			//======SWFADDRESS END======						gotoAndStop(1);			addEventListener(Event.ENTER_FRAME,preloader);		}				//=============================================================		//Preloader		//=============================================================		private function preloader(e:Event) {			var prog = Math.floor(((this.loaderInfo.bytesLoaded/this.loaderInfo.bytesTotal)*100));			tPreloader.text="Loading " + prog + "%";			if (this.loaderInfo.bytesLoaded == this.loaderInfo.bytesTotal) {				removeEventListener(Event.ENTER_FRAME,preloader);				startPage()			}		}				private function startPage() {			gotoAndStop(2);			if (stage) init();			else addEventListener(Event.ADDED_TO_STAGE, init);		}				//=============================================================		//Main		//=============================================================		private function init(e:Event = null):void {			appID = getFlashVars().appid;			host = getFlashVars().approot;			ga = getFlashVars().ga;						appID=appID==null?"":appID			host=host==null?"http://www.localhost.my/":host			ga=ga==null?"":ga;						//GOOGLE ANALYTICS INIT			tracker = new GATracker(this, ga, "AS3", false);			//SWFADDRESS INIT			SWFAddress.addEventListener(SWFAddressEvent.CHANGE, handleSWFAddress);						Security.allowDomain("*");			Security.allowInsecureDomain("*");			Security.loadPolicyFile(host + "/crossdomain.xml");						if(testLocal) {				addChild( new Stats() );			}						//main constructor		}				//=============================================================		//SWFAddress handling		//=============================================================		private function changePage(p:String):void{			SWFAddress.setValue(p);		}				public function handleSWFAddress(e:SWFAddressEvent) {			switch(SWFAddress.getValue()){				case "/":					SWFAddress.setTitle("home");				break;								case "/contact":					SWFAddress.setTitle("contact");				break;			}		}				//=============================================================		//Google Analytics Tracking		//=============================================================		private function gaTracking(page:String) {			tracker.trackPageview(page);		}				//=============================================================		//Extra Function		//=============================================================		private function getFlashVars():Object {			return Object( LoaderInfo( this.loaderInfo ).parameters );		}	}}